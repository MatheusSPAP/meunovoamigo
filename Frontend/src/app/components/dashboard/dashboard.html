<div class="dashboard-container">
  <h2>Bem-vindo(a){{ currentUserName ? ', ' + currentUserName : '' }} ao seu Dashboard!</h2>
  <p>Aqui você encontrará um resumo das informações importantes.</p>

  <div *ngIf="errorMessage" class="error-message">
    <p>{{ errorMessage }}</p>
  </div>

  <div class="dashboard-widgets-grid">

    <!-- Widget: Meus Animais -->
    <div class="dashboard-card">
      <div class="dashboard-section">
        <h3>Meus Animais</h3>
        <div *ngIf="userAnimals.length === 0">
          <p>Você ainda não cadastrou nenhum animal.</p>
          <button routerLink="/cadastrar-animal" class="btn-primary">+ Cadastrar um novo animal</button>
        </div>
        <div *ngIf="userAnimals.length > 0">
          <div *ngIf="pendingInterestsCount > 0" class="alert-card">
            <p>Você tem <strong>{{ pendingInterestsCount }}</strong> novo(s) interesse(s) de adoção aguardando sua revisão!</p>
            <button routerLink="/interesses-adocao" class="btn-secondary">Ver Interesses</button>
          </div>

          <div class="animal-list-dashboard">
            <div *ngFor="let animal of userAnimals" class="animal-card-dashboard">
              <img [src]="animal.foto" [alt]="animal.nome" class="animal-photo-dashboard">
              <div class="animal-details-dashboard">
                <h4>{{ animal.nome }}</h4>
                <p>Status: {{ animal.status_tipo }}</p>
                <a [routerLink]="['/animais', animal.idAnimal]" class="btn-link">Ver Detalhes</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Widget: Minha Jornada de Adoção -->
    <div class="dashboard-card">
      <div class="dashboard-section">
        <h3>Minha Jornada de Adoção</h3>
        <div *ngIf="interessesManifestados.length === 0">
          <p>Você ainda não manifestou interesse em nenhum animal.</p>
          <button routerLink="/animais" class="btn-primary">Encontre seu novo amigo!</button>
        </div>
        <div *ngIf="interessesManifestados.length > 0">
          <p>Total de interesses manifestados: <strong>{{ interessesManifestados.length }}</strong></p>
          <ul>
            <li>Aguardando: <strong>{{ manifestedInterestsSummary.aguardando }}</strong></li>
            <li>Aprovados: <strong>{{ manifestedInterestsSummary.aprovado }}</strong></li>
            <li>Recusados: <strong>{{ manifestedInterestsSummary.recusado }}</strong></li>
          </ul>
          <button routerLink="/interesses-adocao" class="btn-secondary">Ver Meus Interesses</button>
        </div>
      </div>
    </div>

    <!-- Widget: Atividade da Comunidade -->
    <div class="dashboard-card full-width-card">
      <div class="dashboard-section">
        <h3>Atividade da Comunidade</h3>
        <div *ngIf="recentPosts.length === 0">
          <p>Nenhuma postagem recente na comunidade.</p>
          <button routerLink="/criar-postagem" class="btn-primary">+ Criar sua primeira postagem</button>
        </div>
        <div *ngIf="recentPosts.length > 0" class="post-list-dashboard">
          <div *ngFor="let post of recentPosts" class="post-card-dashboard">
            <h4>{{ post.titulo }}</h4>
            <p>{{ post.descricao | slice:0:100 }}...</p>
            <a [routerLink]="['/postagens', post.idcomunidade]" class="btn-link">Ler mais</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Widget: Próximos Eventos -->
    <div class="dashboard-card full-width-card">
      <div class="dashboard-section">
        <h3>Próximos Eventos</h3>
        <div *ngIf="upcomingEvents.length === 0">
          <p>Nenhum evento futuro encontrado.</p>
          <button routerLink="/cadastrar-evento" class="btn-primary">+ Cadastrar um novo evento</button>
        </div>
        <div *ngIf="upcomingEvents.length > 0" class="event-list-dashboard">
          <div *ngFor="let event of upcomingEvents" class="event-card-dashboard">
            <h4>{{ event.titulo }}</h4>
            <p>{{ event.data | date:'dd/MM/yyyy' }} - {{ event.endereco }}</p>
            <a [routerLink]="['/eventos', event.idEvento]" class="btn-link">Ver Detalhes</a>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Outras seções futuras podem ser adicionadas aqui -->