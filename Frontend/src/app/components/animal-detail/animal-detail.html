<div *ngIf="animal" class="animal-detail-container">
  <h2>{{ animal.nome }}</h2>
  <div class="animal-info">
    <img [src]="animal.foto" [alt]="animal.nome" class="animal-image">
    <div class="details">
      <p><strong>Sexo:</strong> {{ animal.sexo === 'M' ? 'Macho' : 'Fêmea' }}</p>
      <p><strong>Status:</strong> <span [class.disponivel]="animal.status_tipo === 'Disponível'" [class.adotado]="animal.status_tipo === 'Adotado'">{{ animal.status_tipo }}</span></p>
      <p><strong>Descrição:</strong> {{ animal.descricao }}</p>
      <p><strong>Castrado:</strong> {{ animal.castrado ? 'Sim' : 'Não' }}</p>
      <p><strong>Vacinado:</strong> {{ animal.vacinado ? 'Sim' : 'Não' }}</p>
      <p><strong>Data de Cadastro:</strong> {{ animal.data_cadastro | date:'dd/MM/yyyy' }}</p>
      <!-- You can add more details here like raça, tipo, tamanho, comportamento -->
    </div>
  </div>

  <div *ngIf="animal.status_tipo === 'Disponível'">
    <button (click)="toggleInterestForm()" class="interest-button">Manifestar Interesse</button>

    <div *ngIf="showInterestForm" class="interest-form-section">
      <h3>Manifestar Interesse em Adoção</h3>
      <form [formGroup]="interesseForm" (ngSubmit)="onSubmitInteresse()">
        <div>
          <label for="mensagem">Mensagem:</label>
          <textarea id="mensagem" formControlName="mensagem" rows="4"></textarea>
          <div *ngIf="interesseForm.get('mensagem')?.invalid && (interesseForm.get('mensagem')?.dirty || interesseForm.get('mensagem')?.touched)">
            Mensagem é obrigatória e deve ter no máximo 255 caracteres.
          </div>
        </div>
        <button type="submit" [disabled]="!interesseForm.valid">Enviar Interesse</button>
      </form>
    </div>
  </div>

  <div *ngIf="animal.status_tipo === 'Adotado'" class="status-adotado-message">
    <p>Este animal já encontrou um lar! ❤️</p>
  </div>

  <div *ngIf="successMessage" class="success-message">
    {{ successMessage }}
  </div>
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>
</div>
<div *ngIf="!animal">
  <p>Animal não encontrado ou carregando...</p>
</div>