<div *ngIf="post" class="post-detail-container">
  <h2>{{ post.titulo }}</h2>
  <p class="post-meta">Por {{ post.usuario_idusuario }} em {{ post.data_postagem | date:'dd/MM/yyyy' }}</p>
  <p class="post-description">{{ post.descricao }}</p>
  <!-- You can add more details here like animal info if needed -->

  <div class="comments-section">
    <h3>Comentários</h3>
    <div *ngIf="comentarios.length === 0">
      <p>Nenhum comentário ainda. Seja o primeiro a comentar!</p>
    </div>
    <div *ngFor="let comentario of comentarios" class="comment-card">
      <p class="comment-meta">Usuário {{ comentario.fk_idusuario }} em {{ comentario.data_comentario | date:'dd/MM/yyyy' }}</p>
      <p class="comment-message">{{ comentario.mensagem }}</p>
    </div>

    <div class="comment-form-section">
      <h4>Adicionar Comentário</h4>
      <form [formGroup]="comentarioForm" (ngSubmit)="onSubmitComentario()">
        <div>
          <label for="comentarioMensagem">Sua mensagem:</label>
          <textarea id="comentarioMensagem" formControlName="mensagem" rows="3"></textarea>
          <div *ngIf="comentarioForm.get('mensagem')?.invalid && (comentarioForm.get('mensagem')?.dirty || comentarioForm.get('mensagem')?.touched)">
            Mensagem é obrigatória e deve ter no máximo 255 caracteres.
          </div>
        </div>
        <button type="submit" [disabled]="!comentarioForm.valid">Comentar</button>
      </form>
    </div>

    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
  </div>
</div>
<div *ngIf="!post">
  <p>Postagem não encontrada ou carregando...</p>
</div>