<div class="user-profile-container">
  <h2>Meu Perfil</h2>

  <div *ngIf="errorMessage" class="error-message">
    <p>{{ errorMessage }}</p>
  </div>
  <div *ngIf="successMessage" class="success-message">
    <p>{{ successMessage }}</p>
  </div>

  <div *ngIf="user && !isEditMode" class="profile-details-view">
    <p><strong>Nome:</strong> {{ user.nome }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>Telefone:</strong> {{ user.telefone }}</p>
    <p><strong>Cidade:</strong> {{ user.cidade }}</p>
    <p><strong>Endereço:</strong> {{ user.endereco }}</p>
    <button (click)="toggleEditMode()" class="edit-button">Editar Perfil</button>
  </div>

  <div *ngIf="user && isEditMode" class="profile-details-edit">
    <h3>Editar Perfil</h3>
    <form [formGroup]="profileForm" (ngSubmit)="onSubmitProfile()">
      <div>
        <label for="nome">Nome:</label>
        <input type="text" id="nome" formControlName="nome">
        <div *ngIf="profileForm.get('nome')?.invalid && (profileForm.get('nome')?.dirty || profileForm.get('nome')?.touched)">
          Nome é obrigatório.
        </div>
      </div>
      <div>
        <label for="email">Email:</label>
        <input type="email" id="email" formControlName="email">
        <div *ngIf="profileForm.get('email')?.invalid && (profileForm.get('email')?.dirty || profileForm.get('email')?.touched)">
          <div *ngIf="profileForm.get('email')?.errors?.['required']">Email é obrigatório.</div>
          <div *ngIf="profileForm.get('email')?.errors?.['email']">Formato de email inválido.</div>
        </div>
      </div>
      <div>
        <label for="telefone">Telefone:</label>
        <input type="text" id="telefone" formControlName="telefone">
        <div *ngIf="profileForm.get('telefone')?.invalid && (profileForm.get('telefone')?.dirty || profileForm.get('telefone')?.touched)">
          Telefone é obrigatório.
        </div>
      </div>
      <div>
        <label for="cidade">Cidade:</label>
        <input type="text" id="cidade" formControlName="cidade">
        <div *ngIf="profileForm.get('cidade')?.invalid && (profileForm.get('cidade')?.dirty || profileForm.get('cidade')?.touched)">
          Cidade é obrigatória.
        </div>
      </div>
      <div>
        <label for="endereco">Endereço:</label>
        <input type="text" id="endereco" formControlName="endereco">
        <div *ngIf="profileForm.get('endereco')?.invalid && (profileForm.get('endereco')?.dirty || profileForm.get('endereco')?.touched)">
          Endereço é obrigatório.
        </div>
      </div>
      <button type="submit" [disabled]="!profileForm.valid">Salvar Alterações</button>
      <button type="button" (click)="toggleEditMode()" class="cancel-button">Cancelar</button>
    </form>
  </div>

  <div *ngIf="!user && !errorMessage">
    <p>Carregando perfil...</p>
  </div>
</div>